" Add Vundler:
"
"    git clone https://github.com/gmarik/vundle.git ~/.vim/bundle/vundle
"
" Run vim and run `:BundleInstall`

" Vundler
set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

filetype plugin indent on

Bundle 'gmarik/vundle'
Bundle 'scrooloose/nerdcommenter'
Bundle 'tpope/vim-rails'
Bundle 'gmarik/snipmate.vim'
Bundle 'tpope/vim-markdown'
Bundle 'dmitrynix/snipmate-snippets'

color desert " Color configuration

set encoding=utf8 " Use utf-8 as default encoding

syntax on
set number
let mapleader = ","

set wrap " Line wrapping on
set expandtab " Use spaces instead tabs
set noswapfile " Dont create *.swp* files. Useful to use with dropbox

" Change tab
map <C-O> :tabprevious<cr>
map <C-P> :tabnext<cr>

" Show invisibles
" http://vimcasts.org/episodes/show-invisibles/
set list
set listchars=tab:\|\ ,trail:·,eol:¬

" Disable arrow keys
" http://www.messaliberty.com/2009/01/how-to-disable-the-arrow-keys-in-vi-or-vim/
" Tip: use control+p or control+n when command mode
noremap  <Up> ""
noremap! <Up> <Esc>
noremap  <Down> ""
noremap! <Down> <Esc>
noremap  <Left> ""
noremap! <Left> <Esc>
noremap  <Right> ""
noremap! <Right> <Esc>

" Status line
set laststatus=2

" Customize status line
" `:help statusline`
set statusline=%<%f\ \[%{&ff}\]\ %y\ %h%m%r%=%-14.(%l,%c%V%)\ %P

" From: http://vim.wikia.com/wiki/Restore_cursor_to_file_position_in_previous_editing_session
" Tell vim to remember certain things when we exit
"  '10  :  marks will be remembered for up to 10 previously edited files
"  "100 :  will save up to 100 lines for each register
"  :20  :  up to 20 lines of command-line history will be remembered
"  %    :  saves and restores the buffer list
"  n... :  where to save the viminfo files
set viminfo='10,\"100,:20,%,n~/.viminfo

function! ResCur()
  if line("'\"") <= line("$")
    normal! g`"
    return 1
  endif
endfunction

augroup resCur
  autocmd!
  autocmd BufWinEnter * call ResCur()
augroup END
